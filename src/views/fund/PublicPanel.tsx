import {useTranslation} from 'react-i18next'
import {Information, InformationContent, InformationTitle} from './Private.style.ts'
import Process from '../../components/process/Process.tsx'
import {FlexCol, FlexRow, FlexSb} from '../../components/flex/Flex.tsx'
import SvgIcon from '../../components/svgIocn/SvgIcon.tsx'
import {ILaunchpadDetail} from '../../api/system.tsx'
import {useMemo} from 'react'
import DecimalTool from '../../utils/DecimalTool.ts'
import {formatDate} from '../../utils/tools.ts'
import LinerButton from '../../components/linerButton/LinerButton.tsx'

type IProps = {
  projectInfo?: ILaunchpadDetail
  onConfirm?: () => void
}
export default function PublicPanel(props: IProps) {
  const {t} = useTranslation()

  const percent = useMemo(() => {
    if (!props.projectInfo) {
      return '0'
    }
    return DecimalTool.div(props.projectInfo.fundedAmount, props.projectInfo.quantity).mul(100).toFixedZero(2, 1)
  }, [props.projectInfo])

  return (
    <Information>
      <InformationTitle>{t(`Purchase information`)}</InformationTitle>
      <InformationContent>
        <div className={'mb-[0.08rem] flex justify-between PlusJakartaSans-Medium'}>
          <span>{props.projectInfo?.fundedAmount}/{props.projectInfo?.quantity} USDT</span>
          <span>{percent}%</span>
        </div>
        <Process percent={Number(percent)} />
        <FlexSb style={{margin: '0.48rem 0'}}>
          <FlexCol>
            <FlexRow>
              <SvgIcon dangerouslySetInnerHTML={`<svg xmlns="http://www.w3.org/2000/svg" width="12" height="13" viewBox="0 0 12 13" fill="none">
                      <path opacity="0.4" fill-rule="evenodd" clip-rule="evenodd" d="M5.30916 0.232461C5.45212 -0.0774872 5.89264 -0.0774871 6.0356 0.232462L7.41249 3.21755C7.47076 3.34387 7.59047 3.43085 7.72862 3.44723L10.9931 3.83428C11.332 3.87447 11.4682 4.29342 11.2176 4.52517L8.80406 6.75711C8.70193 6.85156 8.6562 6.99229 8.68331 7.12874L9.32398 10.353C9.3905 10.6878 9.03412 10.9467 8.73627 10.78L6.16848 9.34269V11.4449H6.66848C6.94462 11.4449 7.16848 11.6688 7.16848 11.9449C7.16848 12.2211 6.94462 12.4449 6.66848 12.4449H4.66848C4.39233 12.4449 4.16848 12.2211 4.16848 11.9449C4.16848 11.6688 4.39233 11.4449 4.66848 11.4449H5.16848V9.34706L2.60849 10.78C2.31065 10.9467 1.95426 10.6878 2.02079 10.353L2.66145 7.12874C2.68856 6.99229 2.64283 6.85156 2.5407 6.75711L0.127197 4.52517C-0.123403 4.29342 0.0127237 3.87447 0.351681 3.83428L3.61615 3.44723C3.75429 3.43085 3.87401 3.34387 3.93227 3.21755L5.30916 0.232461Z" fill="white"/>
                    </svg>`} />
              <span style={{marginLeft: '0.04rem', fontSize: '0.16rem', color: 'rgba(255,255,255,0.4)'}}>{t(`Award`)}</span>
            </FlexRow>
            <div style={{fontSize: '0.2rem', fontWeight: 700, marginTop: '0.12rem'}}>{props.projectInfo?.pledgeReward}%</div>
          </FlexCol>
          <FlexCol>
            <FlexRow>
              <SvgIcon dangerouslySetInnerHTML={`<svg xmlns="http://www.w3.org/2000/svg" width="13" height="12" viewBox="0 0 13 12" fill="none">
                      <g opacity="0.4">
                        <path d="M6.12017 0.548483L6.12028 0.548547L6.12017 0.548483ZM6.17017 0.57735L10.8663 3.28867V8.71132L6.17017 11.4226L1.47401 8.71132V3.28868L6.17017 0.57735ZM6.22017 11.4515L6.21998 11.4514L6.22017 11.4515Z" stroke="white"/>
                        <path d="M5.97017 3.11547C6.09393 3.04402 6.24641 3.04402 6.37017 3.11547L8.56824 4.38453C8.692 4.45598 8.76824 4.58803 8.76824 4.73094V7.26906C8.76824 7.41197 8.692 7.54402 8.56824 7.61547L6.37017 8.88453C6.24641 8.95598 6.09393 8.95598 5.97017 8.88453L3.77209 7.61547C3.64833 7.54402 3.57209 7.41197 3.57209 7.26906V4.73094C3.57209 4.58803 3.64833 4.45598 3.77209 4.38453L5.97017 3.11547Z" fill="white"/>
                      </g>
                    </svg>`} />
              <span style={{marginLeft: '0.04rem', fontSize: '0.16rem', color: 'rgba(255,255,255,0.4)'}}>{t(`type`)}</span>
            </FlexRow>
            <div style={{fontSize: '0.2rem', fontWeight: 700, marginTop: '0.12rem'}}>{props.projectInfo?.projType}</div>
          </FlexCol>
          <FlexCol>
            <FlexRow>
              <SvgIcon dangerouslySetInnerHTML={`<svg xmlns="http://www.w3.org/2000/svg" width="9" height="12" viewBox="0 0 9 12" fill="none">
                      <path opacity="0.4" d="M8.33813 3.9375C8.33813 3.9375 8.20923 3.93555 7.95142 3.93164C7.77173 3.93164 7.54126 3.9375 7.26001 3.94922L6.90845 3.96094C6.39282 3.98047 5.99634 3.99023 5.71899 3.99023C5.44556 3.99023 5.29126 3.97656 5.2561 3.94922C5.22485 3.92188 5.1936 3.85156 5.16235 3.73828C5.0647 3.39453 4.81079 3.2207 4.40063 3.2168L4.24829 3.25195C3.92407 3.33008 3.72681 3.42773 3.65649 3.54492C3.62134 3.60352 3.60376 3.67578 3.60376 3.76172C3.60376 3.84766 3.63306 3.92773 3.69165 4.00195C3.75415 4.07617 3.82251 4.13672 3.89673 4.18359C3.97095 4.22656 4.07642 4.27148 4.21313 4.31836C4.35376 4.36523 4.46313 4.39844 4.54126 4.41797C4.61938 4.43359 4.73462 4.45898 4.88696 4.49414L5.77759 4.69336C6.60571 4.91211 7.21899 5.14062 7.61743 5.37891C8.35181 5.93359 8.71899 6.69531 8.71899 7.66406C8.71899 8.30859 8.54712 8.83789 8.20337 9.25195C7.85962 9.66211 7.44165 9.97266 6.94946 10.1836C6.46118 10.3906 5.92017 10.5527 5.32642 10.6699L5.34399 11.6895L5.34985 11.7891C5.34204 11.8594 5.29712 11.8945 5.21509 11.8945C4.62915 11.8945 4.04321 11.8828 3.45728 11.8594L3.29321 11.707C3.29712 11.6133 3.29907 11.4863 3.29907 11.3262C3.29907 11.002 3.25806 10.7988 3.17603 10.7168C3.0979 10.6348 2.90063 10.5664 2.58423 10.5117C2.27173 10.4609 1.95532 10.3477 1.63501 10.1719C1.3147 9.99219 1.05493 9.77148 0.855713 9.50977C0.468994 9.00586 0.240479 8.39062 0.170166 7.66406C0.177979 7.60156 0.275635 7.57031 0.463135 7.57031L0.744385 7.58203H3.54517C3.59204 7.60156 3.63306 7.69336 3.66821 7.85742C3.70337 8.01758 3.74243 8.14258 3.7854 8.23242C3.88696 8.43945 4.08228 8.54297 4.37134 8.54297C4.6604 8.54297 4.89087 8.48047 5.06274 8.35547C5.23462 8.22656 5.32056 8.06641 5.32056 7.875C5.32056 7.67969 5.25806 7.53906 5.13306 7.45312C5.00806 7.36328 4.89868 7.31641 4.80493 7.3125C4.71118 7.30469 4.6311 7.29102 4.5647 7.27148C4.5022 7.24805 4.41821 7.21875 4.31274 7.18359C4.21118 7.14844 4.11743 7.11914 4.03149 7.0957L3.80884 7.03711C2.75415 6.75977 2.07446 6.54688 1.76978 6.39844C0.840088 5.98047 0.375244 5.25195 0.375244 4.21289C0.375244 2.91211 0.990479 2.02539 2.22095 1.55273C2.58423 1.41602 2.97681 1.30273 3.39868 1.21289C3.37915 0.947266 3.39868 0.480469 3.39868 0.480469C3.39868 0.480469 3.3811 0.046875 3.40454 0C3.62329 0.0078125 3.77563 0.0117188 3.86157 0.0117188L5.16235 0C5.16235 0 5.16235 0.15625 5.16235 0.480469L5.18579 1.23047C6.58423 1.32422 7.51782 1.74609 7.98657 2.49609C8.22485 2.87891 8.34399 3.35547 8.34399 3.92578L8.33813 3.9375Z" fill="white"/>
                    </svg>`} />
              <span style={{
                marginLeft: '0.04rem',
                fontSize: '0.16rem',
                color: 'rgba(255,255,255,0.4)',
              }}>{t(`time to market`)}</span>
            </FlexRow>
            <div style={{fontSize: '0.2rem', fontWeight: 700, marginTop: '0.12rem'}}>{formatDate(props.projectInfo?.createdAt, 'yyyy-MM-dd')}</div>
          </FlexCol>
        </FlexSb>
        <FlexCol>
          <FlexRow style={{marginBottom: '0.12rem'}}>
            <SvgIcon dangerouslySetInnerHTML={`<svg xmlns="http://www.w3.org/2000/svg" width="9" height="11" viewBox="0 0 9 11" fill="none">
                    <path opacity="0.4" fill-rule="evenodd" clip-rule="evenodd" d="M4.49829 5C5.879 5 6.99829 3.88071 6.99829 2.5C6.99829 1.11929 5.879 0 4.49829 0C3.11758 0 1.99829 1.11929 1.99829 2.5C1.99829 3.88071 3.11758 5 4.49829 5ZM7.68027 7.31802C8.52419 8.16193 8.99829 9.30653 8.99829 10.5H4.49829L-0.00170898 10.5C-0.00170898 9.30653 0.472397 8.16193 1.31631 7.31802C2.16022 6.47411 3.30482 6 4.49829 6C5.69177 6 6.83636 6.47411 7.68027 7.31802Z" fill="white"/>
                  </svg>`} />
            <span style={{marginLeft: '0.04rem', fontSize: '0.16rem', color: 'rgba(255,255,255,0.4)'}}>{t(`Investor`)}</span>
          </FlexRow>
          <FlexRow style={{flexWrap: 'wrap'}}>
            {
              props.projectInfo?.investors.map((item, index) => {
                const len = props.projectInfo?.investors?.length || 0;
                return <FlexRow className={'mb-[0.16rem]'} key={item.id} style={index !== len - 1 ? {marginRight: '0.28rem'} : {}}>
                  <img src={item.logoUrl} style={{width: '0.32rem', height: '0.32rem', marginRight: '0.04rem', borderRadius: '50%'}} alt="" />
                  <span style={{fontSize: '0.2rem', fontWeight: 700}}>{item.name}</span>
                </FlexRow>
              })
            }
          </FlexRow>
        </FlexCol>
        <FlexCol style={{marginTop: '0.52rem'}}>
          <FlexRow>
            <SvgIcon dangerouslySetInnerHTML={`<svg xmlns="http://www.w3.org/2000/svg" width="9" height="12" viewBox="0 0 9 12" fill="none">
                      <path opacity="0.4" d="M8.33813 3.9375C8.33813 3.9375 8.20923 3.93555 7.95142 3.93164C7.77173 3.93164 7.54126 3.9375 7.26001 3.94922L6.90845 3.96094C6.39282 3.98047 5.99634 3.99023 5.71899 3.99023C5.44556 3.99023 5.29126 3.97656 5.2561 3.94922C5.22485 3.92188 5.1936 3.85156 5.16235 3.73828C5.0647 3.39453 4.81079 3.2207 4.40063 3.2168L4.24829 3.25195C3.92407 3.33008 3.72681 3.42773 3.65649 3.54492C3.62134 3.60352 3.60376 3.67578 3.60376 3.76172C3.60376 3.84766 3.63306 3.92773 3.69165 4.00195C3.75415 4.07617 3.82251 4.13672 3.89673 4.18359C3.97095 4.22656 4.07642 4.27148 4.21313 4.31836C4.35376 4.36523 4.46313 4.39844 4.54126 4.41797C4.61938 4.43359 4.73462 4.45898 4.88696 4.49414L5.77759 4.69336C6.60571 4.91211 7.21899 5.14062 7.61743 5.37891C8.35181 5.93359 8.71899 6.69531 8.71899 7.66406C8.71899 8.30859 8.54712 8.83789 8.20337 9.25195C7.85962 9.66211 7.44165 9.97266 6.94946 10.1836C6.46118 10.3906 5.92017 10.5527 5.32642 10.6699L5.34399 11.6895L5.34985 11.7891C5.34204 11.8594 5.29712 11.8945 5.21509 11.8945C4.62915 11.8945 4.04321 11.8828 3.45728 11.8594L3.29321 11.707C3.29712 11.6133 3.29907 11.4863 3.29907 11.3262C3.29907 11.002 3.25806 10.7988 3.17603 10.7168C3.0979 10.6348 2.90063 10.5664 2.58423 10.5117C2.27173 10.4609 1.95532 10.3477 1.63501 10.1719C1.3147 9.99219 1.05493 9.77148 0.855713 9.50977C0.468994 9.00586 0.240479 8.39062 0.170166 7.66406C0.177979 7.60156 0.275635 7.57031 0.463135 7.57031L0.744385 7.58203H3.54517C3.59204 7.60156 3.63306 7.69336 3.66821 7.85742C3.70337 8.01758 3.74243 8.14258 3.7854 8.23242C3.88696 8.43945 4.08228 8.54297 4.37134 8.54297C4.6604 8.54297 4.89087 8.48047 5.06274 8.35547C5.23462 8.22656 5.32056 8.06641 5.32056 7.875C5.32056 7.67969 5.25806 7.53906 5.13306 7.45312C5.00806 7.36328 4.89868 7.31641 4.80493 7.3125C4.71118 7.30469 4.6311 7.29102 4.5647 7.27148C4.5022 7.24805 4.41821 7.21875 4.31274 7.18359C4.21118 7.14844 4.11743 7.11914 4.03149 7.0957L3.80884 7.03711C2.75415 6.75977 2.07446 6.54688 1.76978 6.39844C0.840088 5.98047 0.375244 5.25195 0.375244 4.21289C0.375244 2.91211 0.990479 2.02539 2.22095 1.55273C2.58423 1.41602 2.97681 1.30273 3.39868 1.21289C3.37915 0.947266 3.39868 0.480469 3.39868 0.480469C3.39868 0.480469 3.3811 0.046875 3.40454 0C3.62329 0.0078125 3.77563 0.0117188 3.86157 0.0117188L5.16235 0C5.16235 0 5.16235 0.15625 5.16235 0.480469L5.18579 1.23047C6.58423 1.32422 7.51782 1.74609 7.98657 2.49609C8.22485 2.87891 8.34399 3.35547 8.34399 3.92578L8.33813 3.9375Z" fill="white"/>
                    </svg>`} />
            <span style={{marginLeft: '0.04rem', fontSize: '0.16rem', color: 'rgba(255,255,255,0.4)'}}>{t(`Price`)}</span>
          </FlexRow>
          <FlexSb>
            <span style={{fontSize: '0.32rem', fontWeight: 700}}>{props.projectInfo?.subscribePrice} USDT</span>
            <LinerButton
              width={152}
              height={48}
              radius={40}
              disabled={false}
              onClick={props.onConfirm}>{t(`Launchpad`)}</LinerButton>
          </FlexSb>
        </FlexCol>
      </InformationContent>
    </Information>
  )
}
